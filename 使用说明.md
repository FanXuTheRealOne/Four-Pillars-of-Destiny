# 八字排盘系统 - 使用说明

## 快速开始

### 方法1：使用简单测试程序（推荐）

1. 打开 `simple_test.py` 文件
2. 修改顶部的参数：
```python
出生年 = 2000
出生月 = 7
出生日 = 15
出生时 = 16  # 24小时制
性别 = True  # True=男，False=女
```
3. 运行程序：
```bash
cd /Users/xufan/Desktop/AppDev/bazi_python
python3 simple_test.py
```

### 方法2：查看完整示例

运行 `example.py` 查看所有功能演示：
```bash
python3 example.py
```

### 方法3：在代码中使用

```python
from bazi import BaZiResult

# 排盘
result = BaZiResult.from_solar(2000, 7, 15, 16, is_male=True)

# 查看八字
print(result.ba_zi.year)  # 年柱
print(result.ba_zi.month) # 月柱
print(result.ba_zi.day)   # 日柱
print(result.ba_zi.hour)  # 时柱

# 查看大运
for da_yun in result.da_yun_system.da_yun_list[:5]:
    print(da_yun)

# 查看流年
liu_nian = result.get_liu_nian(2024)
print(liu_nian)
```

## 时辰对照表

| 时辰 | 时间范围 | 时辰数 |
|------|----------|--------|
| 子时 | 23:00-00:59 | 0 或 23 |
| 丑时 | 01:00-02:59 | 1 |
| 寅时 | 03:00-04:59 | 3 |
| 卯时 | 05:00-06:59 | 5 |
| 辰时 | 07:00-08:59 | 7 |
| 巳时 | 09:00-10:59 | 9 |
| 午时 | 11:00-12:59 | 11 或 12 |
| 未时 | 13:00-14:59 | 13 |
| 申时 | 15:00-16:59 | 15 |
| 酉时 | 17:00-18:59 | 17 |
| 戌时 | 19:00-20:59 | 19 |
| 亥时 | 21:00-22:59 | 21 |

## 输出说明

### 四柱八字
- **年柱**：出生年份的天干地支（以立春为界）
- **月柱**：出生月份的天干地支（以节气为界）
- **日柱**：出生日期的天干地支
- **时柱**：出生时辰的天干地支

### 十神
代表日干与其他干的关系：
- **比肩**：同我者（同性）
- **劫财**：同我者（异性）
- **食神**：我生者（同性）
- **伤官**：我生者（异性）
- **偏财**：我克者（同性）
- **正财**：我克者（异性）
- **七杀**：克我者（同性）
- **正官**：克我者（异性）
- **偏印**：生我者（同性）
- **正印**：生我者（异性）

### 大运
- 每个大运管10年
- **顺排**：阳男阴女，从月柱顺数
- **逆排**：阴男阳女，从月柱逆数
- **起运年龄**：简化为3岁（实际应根据节气计算）

### 流年
- 每年的天干地支
- 显示当年虚岁年龄
- 计算与日干的十神关系

### 旬空（空亡）
- 六甲旬中缺少的两个地支
- 代表该地支力量减弱

## 常见问题

### Q1：计算结果和万年历有差异？
A：可能原因：
1. 节气附近的日期，月柱可能有1-2天偏差
2. 建议立春、惊蛰等节气前后的日期查询万年历确认

### Q2：起运年龄为什么是3岁？
A：这是简化算法。实际应根据出生到下一个节气的时间精确计算，可能在1-10岁之间。

### Q3：23点算今天还是明天？
A：23点算次日子时。如果你是23点出生，应该使用次日的日期，但时辰填23。

### Q4：不知道出生时间怎么办？
A：可以先用12时（午时中）排盘查看日柱，时柱仅供参考。

## 测试案例

### 案例1：2000年7月15日16时 男
```python
result = BaZiResult.from_solar(2000, 7, 15, 16, is_male=True)
```
结果：
- 年柱：庚辰
- 月柱：癸未
- 日柱：庚申
- 时柱：甲申

### 案例2：1990年3月5日8时 女
```python
result = BaZiResult.from_solar(1990, 3, 5, 8, is_male=False)
```
结果：
- 年柱：庚午
- 月柱：戊寅
- 日柱：乙卯
- 时柱：庚辰

## 技术说明

### 算法来源
本程序从C++项目 [ZhouYiLab](https://github.com/banderzhm/ZhouYiLab) 转换而来，保持了原始算法逻辑。

### 精度说明
- ✅ 日柱精确
- ✅ 年柱精确（立春边界）
- ⚠️ 月柱在节气附近可能有1-2天偏差
- ⚠️ 起运年龄固定为3岁（简化）

### 适用范围
- 支持1900-2100年的日期
- 使用公历（阳历）输入
- 基于简化的节气算法

## 文件说明

- `ganzhi.py` - 天干地支基础模块（枚举、五行、十神）
- `lunarcal.py` - 农历转换和八字计算
- `bazi.py` - 八字排盘主模块（大运、流年）
- `simple_test.py` - 简单测试程序（修改参数直接运行）
- `example.py` - 完整功能演示
- `README.md` - 项目说明
- `使用说明.md` - 本文件

## 需要帮助？

如果遇到问题或结果有疑问：
1. 检查输入的日期和时辰是否正确
2. 对比权威万年历验证
3. 节气前后建议手动确认月柱

祝你使用愉快！

